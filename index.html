<!doctype html>
<html>
	<head>
		<title>HEADE</title>
	</head>
	<body>
		<script type="text/template">
			<div @prop:attr="val" &on:click="alert('dasds')" $prop:value="a+b" :model="inputValue" attr-x="sdasd" a="sdas" $prop="{x:1, b: 2}">
				{{#list items as item}}
					innerText {{item.name}}
				{{/list}}
			</div>
		</script>

		<script src="./dist/parse.js"></script>
		<script>
			[...document.querySelectorAll(`script[type="text/template"]`)].forEach(templateNode => {
				const tpl = templateNode.textContent;
				console.log("res", parse.formatTpl(parse.parseTpl(tpl).root.children));
			});


			// console.log("tpl", parse.parseTpl(
			// 	`<div @prfix:attr="val" attr-x="{{express}}">
			// 		{{#list items as item}}
			// 			innerText {{item.name}}
			// 		{{/list}}
			// 	</div>`
			// ));

			// 	console.log("expression1", parse.parseExpression(`

			// 		"aaaa\\" bbbb cccc" "dddd"
			// 		123
			// 		"eeee"
			// 	`));

			// const exp = `
			// 		const a = async (arg1 = 5, arg2, ...rest) => {
			// 			const [x, y, z = 3] = rest;
			// 			const {a, b, c: val = "def"} = arg2;
			// 			// this is one line comment
			// 			switch (a) {
			// 				case "aaa":
			// 					console.log("sdads");
			// 				break;
			// 				case "bbb":
			// 					console.log("sdads");
			// 				break;
			// 				default: console.log("sdads\\" sdasda asd");
			// 			}


			// 			(abc)();
			// 			({sdasda: 1})["sdasda"];


			// 			(1).toString();
			// 			"sdas".toString();
			// 			[].toString();
			// 			const uuu = {}.toString(a, b, c);

			// 			for (let i = 0; i < b; i++) {

			// 			}

			// 			/* this is
			// 			multiline
			// 			comment */

			// 			class XX extends Object {
			// 				constructor () {
			// 					const x = a ? b.d : c;
			// 				}
			// 				bb () {

			// 				}
			// 				static cc () {

			// 				}
			// 				get value () {

			// 				}
			// 				abc () {

			// 				}
			// 			}
			// 		}

			// 	`;

			// const exp2 = `a = x.m.f[p.kek] ? t : r`;

			const Scope = parse.Scope;
			// const exp3 = `a.b.c(1, "test-test".toString()).d()["foo"] = 5`;
			// const parsedExpr = parse.parseExpression(exp3);
			// console.log("expression", parsedExpr);
			// console.log("original", exp3);
			// console.log("format", parse.formatExpression(parsedExpr.root));



			// const expTest = parse.formatExpression(parse.parseExpression(`fns.doSmth(x, 10)`).root);
			// console.log("EXPR", expTest);
			// const tpl = new Function("_$g", expTest);
			// const scope = new Scope({fns: {doSmth (a, b) {return `${a} -- ${b}`}}});
			// const scp = scope.new({x: 33});
			// console.log(tpl(scp.get));



		</script>
	</body>
</html>
