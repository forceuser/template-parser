!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.parse=e():t.parse=e()}(window,function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";function a(t,e){const n=t.split("\n").map(t=>t.length);let a=0,o=0;for(;a<e&&o<n.length;)a+=n[o],o++;return o-1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=class{constructor(t,e=0){this.text=t,this.idx=e,this.root={type:"root",children:[],start:e,end:t.length},this.stack=[this.root],this.copyStack=[],Object.defineProperty(this.stack,"empty",{get(){return 0===this.length}}),this.stack.last=(()=>this.stack[this.stack.length-1])}regexp(t,e=""){return new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),e)}add(t,e){const n=this,a=Object.assign({children:[],start:this.lastIdx,end:this.idx,data:{}},e,{type:t});return Object.defineProperty(a,"text",{get:()=>n.text.substring(a.start,a.end||n.text.length)}),this.node.children.push(a),a}start(...t){const e=this.add(...t);return this.stack.push(e),e.start=this.idx,e.lineStart=a(this.text,e.start),e.end=null,e}end(t){const e=this.stack.pop();return t&&Object.assign(e,t),e.end=this.idx,e.lineEnd=a(this.text,e.end),e}get(t,e=0){return 1===t?this.text.charAt(this.idx+e):this.text.substr(this.idx+e,t)}startCopy(){this.copyStack.push(this.idx)}endCopy(){const t=this.copyStack.pop();return this.text.substring(t,this.idx)}get node(){return this.stack[this.stack.length-1]}go(t=1){return this.lastIdx=this.idx,this.idx+=t,this.moved=!0,this}next(){return this.lastIdx=this.idx,this.moved?this.moved=!1:this.idx++,this}isEnd(){return this.idx>=this.text.length}match(t){const e=this.get();return t instanceof RegExp?e.match(t):e.startsWith(t)}get before(){return this.text.substr(0,this.idx)}precedes(t){const e=this.before;return t instanceof RegExp?e.match(t):e.endsWith(t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=new o.default(t),n={startTag(){if(e.match("<")){const t=e.match(/^<([a-z](-?[a-z])*)/i);if(t){const n=t[1];return e.start("tag",{data:{tagName:n,open:!0}}),e.go(n.length+1),!0}{const t=e.match(/^<\/([a-z](-?[a-z])*)>/i);if(t){const n=t[1];return e.go(t[0].length).add("tag",{data:{tagName:n,close:!0}}),!0}}}},startComment(){if(e.match("\x3c!--"))return e.start("comment"),e.go(4),!0},endComment(){if(e.match("--\x3e"))return e.go(3).end(),!0},endTag:()=>e.match("/>")?(e.go(2).end({data:{selfClosing:!0}}),!0):e.match(">")?(e.go().end(),!0):void 0,startAttr(){const t=e.match(/^(@[a-z]+)?:?([a-z-]+)?(?:=(["']))?/i);if(t&&t[0]){const[n,a,o,r]=t;return r?(e.start("attr",{data:{attr:o,prefix:a,quote:r}}),e.go(n.length)):e.go(n.length).add("attr",{data:{attr:o,prefix:a}}),!0}},attr(){const t=e.match(r);if(t){let t;e.go(r.length),e.startCopy();const n=`${s}${e.node.data.quote}`;for(;!t&&!e.isEnd();)!(t=e.match(n))&&e.go();if(t){const t=e.endCopy();e.go(n.length).end({data:{expression:t}})}}else{const t=/^(("(?:[^"\\]|\\.)*")|('(?:[^'\\]|\\.)*'))/,n=e.go(-1).match(t);n&&(e.node.value=n[0],e.go(n[0].length).end())}},text(){const t=e.root.children[e.root.children.length-1];t&&"text"===t.type?(t.end=e.idx,t.data.content+=e.get(1)):e.go(1).add("text",{data:{content:e.get(1)}})},expression(){const t=e.match(new RegExp(`^${r}(#|/)?(.*?)${s}`));if(t){const{0:n,1:a,2:o}=t;let r,s;if("#"===a){const t=o.match(/^([a-z]+(?:-[a-z]*)*)\s?(.*)/i);r=t[1],s=t[2]}e.go(n.length).add("expression",{data:{expression:o,control:a,fn:r,args:s}})}}};for(;!e.isEnd();){switch(e.node.type){case"tag":e.node.data.open?[n.endTag,n.startAttr].some(t=>t()):n.endTag();break;case"attr":n.attr();break;case"comment":n.endComment();break;default:[n.startTag,n.startComment,n.expression,n.text].some(t=>t())}e.next()}return e};var a,o=(a=n(0))&&a.__esModule?a:{default:a};const r="{{",s="}}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=new o.default(t),n={string(){if("string"===e.node.type){if(e.match(e.node.data.quote)){const t=e.precedes(/(\\+)$/);if(!t||t&&t[1].length%2==0)return e.go().end(),!0}}else{const t=e.match(/^(["'`])/);if(t)return e.start("string",{data:{quote:t[1]}}),!0}},comment(){const t=e.match(/^(\/\/.*?)(?:$|\Z)/m)||e.match(/^(\/\*[\s\S]*?\*\/)/);if(t)return console.log("comment",t[1]),e.go(t[1].length).add("comment"),!0},keyword(){const t=e.match(r);t&&e.go(t[1].length).add("keyword",{data:{val:t[1]}})},bracketsRound:()=>"()"===e.node.type&&e.match(")")?(e.go().end(),!0):e.match("(")?(e.start("()"),!0):void 0,bracketsSquare:()=>"[]"===e.node.type&&e.match("]")?(e.go().end(),!0):e.match("[")?(e.start("[]"),!0):void 0,bracketsCurly:()=>"{}"===e.node.type&&e.match("}")?(e.go().end(),!0):e.match("{")?(e.start("{}"),!0):void 0,dot(){const t=e.match(/^(\.+)/);if(t&&1===t[1].length)return e.go().add("dot"),!0},comma(){if(e.match(","))return e.go().add(","),!0},colon(){if(e.match(":"))return e.go().add(":"),!0},semicolon(){if(e.match(";"))return e.go().add(";"),!0},number(){const t=e.match(/^(\d+?\.?\d*)/);if(t)return e.go(t[1].length).add("number",{data:{val:t[1]}}),!0},literal(){const t=e.match(/^([a-z][a-z0-9]*)/i);if(t)return e.go(t[1].length).add("literal",{data:{val:t[1]}}),!0},operation(){const t=e.match(/^([^\s,;\])}a-z]+)/i);if(t)return e.go(t[1].length).add("operation",{data:{val:t[1]}}),!0},lineEnd(){if(e.match(/^\n/))return e.go().add("lineEnd"),!0}};for(;!e.isEnd();){switch(e.node.type){case"string":n.string();break;case"comment":break;default:[n.comment,n.string,n.lineEnd,n.number,n.keyword,n.bracketsRound,n.bracketsSquare,n.bracketsCurly,n.colon,n.semicolon,n.comma,n.dot,n.literal,n.operation].some(t=>t())}e.next()}return e};var a,o=(a=n(0))&&a.__esModule?a:{default:a};const r=new RegExp(`^(${["async","await","break","case","class","catch","const","continue","debugger","default","delete","do","else","enum","export","extends","finally","for","function","goto","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","implements","package","protected","static","interface","private","public","null","true","false","undefined"].join("|")})\\b`)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(2)),o=r(n(1));function r(t){return t&&t.__esModule?t:{default:t}}var s={parseExpression:a.default,parseTpl:o.default};e.default=s},function(t,e,n){"use strict";t.exports=n(3).default}])});
//# sourceMappingURL=parse.js.map