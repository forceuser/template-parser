{"version":3,"sources":["webpack://parse/webpack/universalModuleDefinition","webpack://parse/webpack/bootstrap","webpack://parse/./src/parse-ctrl.js","webpack://parse/./src/format-expression.js","webpack://parse/./src/parse-tpl.js","webpack://parse/./src/parse-expression.js","webpack://parse/./src/index.js","webpack://parse/./src/cjs-entry.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","getLineNumber","str","idx","lines","split","map","length","lc","constructor","text","this","type","children","start","end","stack","copyStack","last","regexp","flags","RegExp","replace","add","params","ctrl","node","assign","lastIdx","data","substring","push","args","lineStart","pop","lineEnd","shift","charAt","substr","startCopy","endCopy","go","moved","next","isEnd","match","val","startsWith","before","precedes","endsWith","format","isLit","includes","isOP","parent","skipBrackets","isSet","snodes","prevNode","brk","forEach","block","open","chain","beforeChain","result","line","declaration","leftSide","leftSideLit","nextNode","fn","fnKeyword","argsNode","fnName","fnArgs","isLast","codeNode","blockStart","argStart","opStart","chainable","skipOutput","op","isOPNoAccessor","space","after","isLoc","isSetHere","chainList","formatList","list","isCall","formatNode","slice","join","formatChain","t","needSpace","close","ParseCtrl","parse","startTag","tagName","matchClose","startComment","endComment","endTag","selfClosing","startAttr","full","prefix","attr","quote","matchExpr","startExp","matcher","endExp","expression","stringRegex","lastNode","content","0","1","control","2","some","_parseCtrl","string","matchEscapes","matchQuote","comment","console","log","keyword","keywordsRegex","brackets","{","(","[","dot","comma","colon","semicolon","arrow","number","literal","operation","linebreak","_parseExpression","_interopRequireDefault","_parseTpl","_formatExpression","parseExpression","parseTpl","formatExpression","default"],"mappings":"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,UACN/C,EAAM0C,UACN1C,EAAM4C,OACN5C,EAAMiC,QACNjC,EAAMmC,SACNnC,EAAMyC,MACNzC,EAAMwC,MACNxC,EAAMuC,IACNvC,EAAM2C,MACN3C,EAAM6C,QACN7C,EAAM8C,WACLrB,KAAKhI,GAAKA,KAId0B,EAAKkB,OAEN,OAAOlB,GA5MR,MAAAuG,KAAA1J,EAAA,gCAEA,MAoDMkK,EAAgB,IAAInH,aAnDzB,QACA,QACA,QACA,OACA,QACA,QACA,QACA,WACA,WACA,UACA,SACA,KACA,OACA,OACA,SACA,UACA,UACA,MACA,WACA,OACA,KACA,SACA,KACA,aACA,MACA,MACA,SACA,QACA,SACA,OACA,QACA,MACA,SACA,MACA,OACA,QACA,OACA,QACA,aACA,UACA,YACA,SACA,YACA,UACA,SACA,OACA,OACA,QACA,aAG8C2E,KAAK,4GCtDpD,IAAAsD,EAAAC,EAAAjL,EAAA,IACAkL,EAAAD,EAAAjL,EAAA,IACAmL,EAAAF,EAAAjL,EAAA,8DAGCoL,0BACAC,mBACAC,sECPD3L,EAAOD,QAAUM,EAAQ,GAAcuL","file":"parse.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"parse\"] = factory();\n\telse\n\t\troot[\"parse\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","function getLineNumber (str, idx) {\n\tconst lines = str.split(\"\\n\").map(s => s.length);\n\tlet lc = 0;\n\tlet i = 0;\n\twhile (lc < idx && i < lines.length) {\n\t\tlc += lines[i];\n\t\ti++;\n\t}\n\treturn i - 1;\n}\n\nexport default class ParseCtrl {\n\tconstructor (text, idx = 0) {\n\t\tthis.text = text;\n\t\tthis.idx = idx;\n\t\tthis.root = {type: \"root\", children: [], start: idx, end: text.length};\n\t\tthis.stack = [this.root];\n\t\tthis.copyStack = [];\n\t\tObject.defineProperty(this.stack, \"empty\", {\n\t\t\tget () {\n\t\t\t\treturn this.length === 0;\n\t\t\t},\n\t\t});\n\t\tthis.stack.last = () => {\n\t\t\treturn this.stack[this.stack.length - 1];\n\t\t};\n\t}\n\tregexp (s, flags = \"\") {\n\t\treturn new RegExp(s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"), flags);\n\t}\n\tadd (type, params) {\n\t\tconst ctrl = this;\n\t\tconst node = Object.assign({children: [], start: this.lastIdx, end: this.idx, data: {}}, params, {type});\n\t\tObject.defineProperty(node, \"text\", {\n\t\t\tget () {\n\t\t\t\treturn ctrl.text.substring(node.start, node.end || ctrl.text.length);\n\t\t\t},\n\t\t});\n\t\tthis.node.children.push(node);\n\t\treturn node;\n\t}\n\tstart (...args) {\n\t\tconst node = this.add(...args);\n\t\tthis.stack.push(node);\n\t\tnode.start = this.idx;\n\t\tnode.lineStart = getLineNumber(this.text, node.start);\n\t\tnode.end = null;\n\t\treturn node;\n\t}\n\tend (params) {\n\t\tconst node = this.stack.pop();\n\t\tif (params) {\n\t\t\tObject.assign(node, params);\n\t\t}\n\t\tnode.end = this.idx;\n\t\tnode.lineEnd = getLineNumber(this.text, node.end);\n\t\treturn node;\n\t}\n\tget (length, shift = 0) {\n\t\tif (length === 1) {\n\t\t\treturn this.text.charAt(this.idx + shift);\n\t\t}\n\t\treturn this.text.substr(this.idx + shift, length);\n\t}\n\tstartCopy () {\n\t\tthis.copyStack.push(this.idx);\n\t}\n\tendCopy () {\n\t\tconst idx = this.copyStack.pop();\n\t\treturn this.text.substring(idx, this.idx);\n\t}\n\tget node () {\n\t\treturn this.stack[this.stack.length - 1];\n\t}\n\tgo (shift = 1) {\n\t\tthis.lastIdx = this.idx;\n\t\tthis.idx += shift;\n\t\tthis.moved = true;\n\t\treturn this;\n\t}\n\tnext () {\n\t\tthis.lastIdx = this.idx;\n\t\tif (!this.moved) {\n\t\t\tthis.idx++;\n\t\t}\n\t\telse {\n\t\t\tthis.moved = false;\n\t\t}\n\t\treturn this;\n\t}\n\tisEnd () {\n\t\treturn this.idx >= this.text.length;\n\t}\n\tmatch (val) {\n\t\tconst str = this.get();\n\t\tif (val instanceof RegExp) {\n\t\t\treturn str.match(val);\n\t\t}\n\t\treturn str.startsWith(val);\n\t}\n\tget before () {\n\t\treturn this.text.substr(0, this.idx);\n\t}\n\tprecedes (val) {\n\t\tconst str = this.before;\n\t\tif (val instanceof RegExp) {\n\t\t\treturn str.match(val);\n\t\t}\n\t\treturn str.endsWith(val);\n\t}\n}\n","export default format;\n\nfunction isVal (node) {\n\treturn [\"number\", \"literal\", \"string\"].includes(node.type);\n}\n\nfunction isLit (node) {\n\treturn [\"keyword\", \"number\", \"literal\", \"string\"].includes(node.type);\n}\n\nfunction isOP (node) {\n\treturn [\"operation\", \",\", \".\", \":\", \"=>\"].includes(node.type);\n}\n\nfunction isOPNoAccessor (node) {\n\treturn [\"operation\", \",\", \":\"].includes(node.type);\n}\n\nfunction isSign (node) {\n\treturn ![\"comment\", \"linebreak\", \";\"].includes(node.type);\n}\n\nfunction formatChain (chain, before, after, isSet = false) {\n\tlet result = \"\";\n\tlet idx = 0;\n\tlet isLoc = chain[0] && chain[0].type !== \"literal\";\n\tconst assigmentExp = [\"++\", \"--\", \"=\", \"+=\", \"-=\", \"*=\", \"/=\", \"%=\", \"**=\", \"<<=\", \">>=\", \">>>=\", \"&=\", \"^=\", \"|=\"];\n\tconst isSetHere = (before && before.type === \"operation\" && [\"++\", \"--\"].includes(before.data.val)) ||\n\t(after && after.type === \"operation\" && assigmentExp.includes(after.data.val));\n\tisSet = isSet || isSetHere;\n\tlet chainList = [];\n\tconst formatList = (list, isCall, args, isLast) => {\n\t\tlet result = isLoc ? `_$gl(${formatNode(list[0])},` : `_$g(`;\n\t\tif (isLoc) {\n\t\t\tlist = list.slice(1);\n\t\t}\n\t\tresult += isCall ? `[${args}],` : `false,`;\n\t\tresult += `[${list.map(formatNode).join(\",\")}],`;\n\t\tif (!isLoc) {\n\t\t\tresult += `()=>${list[0].data.val}`;\n\t\t\tif (isSet) {\n\t\t\t\tresult += `,_$v=>${list[0].data.val}=_$v`;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tresult += isSet ? \"true\" : \"false\";\n\t\t}\n\n\t\tif (isLast) {\n\t\t\tresult += \", true).val\";\n\t\t}\n\t\telse {\n\t\t\tresult += \")\";\n\t\t}\n\t\treturn result;\n\t};\n\tconst formatNode = i => i.data.val ? (i.type === \"literal\" ? `\"${i.data.val}\"` : i.data.val) : format(i, \"code\", true);\n\twhile (idx < chain.length) {\n\t\tconst i = chain[idx];\n\t\tconst call = i.type === \"brackets\" && i.data.open === \"(\";\n\t\tif (call) {\n\n\t\t\tresult = formatList(chainList, true, format(i, \"code\", true, isSet));\n\t\t\tisLoc = true;\n\t\t\tchainList = [{data: {val: result}}];\n\t\t}\n\t\telse {\n\t\t\tchainList.push(i);\n\t\t\tisLoc = isLoc || (chainList.length === 1 && i.type !== \"literal\");\n\t\t\tif (idx === chain.length - 1) {\n\t\t\t\tif (isLoc && chainList.length === 1) {\n\t\t\t\t\tresult = formatNode(chainList[0]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult = formatList(chainList, false, null, isSetHere);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tidx++;\n\t}\n\n\treturn result;\n}\n\nfunction format (parent, type = \"root\", skipBrackets = false, isSet = false) {\n\tconst nodes = parent.children || [];\n\tconst snodes = [];\n\tlet brk = false;\n\tlet prevNode;\n\tnodes.forEach((node, idx) => {\n\t\tif (isSign(node)) {\n\t\t\tsnodes.push(node);\n\t\t\tconst block = prevNode && prevNode.type !== \"brackets\" && prevNode.data.open === \"{\";\n\t\t\tif (prevNode && (brk === \";\" || (brk === \"linebreak\" && (!isOP(node) && !isOP(prevNode) && !block)))) {\n\t\t\t\tprevNode.brk = true;\n\t\t\t}\n\t\t\tbrk = false;\n\t\t\tprevNode = node;\n\t\t}\n\t\telse if (node.type === \";\" || (node.type === \"linebreak\" && !brk)) {\n\t\t\tbrk = node.type;\n\t\t}\n\t\t// if (idx >= node.length - 1) {\n\t\t// \tnode.brk = true;\n\t\t// }\n\t});\n\tlet result = \"\";\n\tif (parent.type === \"brackets\" && !skipBrackets) {\n\t\tresult += parent.data.open;\n\t}\n\tprevNode = null;\n\tlet chain;\n\tlet beforeChain;\n\tlet declaration = false;\n\tlet leftSide = false;\n\tlet line;\n\tlet leftSideLit = false;\n\n\tsnodes.forEach((node, idx) => {\n\t\tconst nextNode = snodes[idx + 1];\n\t\tif (node.type === \"keyword\" && node.data.val === \"function\") {\n\t\t\tnode.fn = true;\n\t\t\tnode.fnKeyword = true;\n\t\t\tlet argsNode = snodes[idx + 1];\n\t\t\tif (argsNode && argsNode.type === \"literal\") {\n\t\t\t\targsNode.fn = true;\n\t\t\t\targsNode.fnName = true;\n\t\t\t\targsNode = snodes[idx + 2];\n\t\t\t}\n\t\t\tif (argsNode && argsNode.type === \"brackets\") {\n\t\t\t\targsNode.fn = true;\n\t\t\t\targsNode.fnArgs = true;\n\t\t\t}\n\t\t}\n\t\telse if (nextNode && nextNode.type === \"=>\") {\n\t\t\tnode.fn = true;\n\t\t\tnode.fnArgs = true;\n\t\t}\n\n\t\tconst isLast = idx >= snodes.length - 1;\n\t\tconst literal = node.type === \"literal\";\n\t\tconst lineStart = !prevNode || prevNode.brk;\n\t\tconst codeNode = [\"root\", \"code\"].includes(type);\n\t\tconst blockStart = ((prevNode && prevNode.type === \",\") || lineStart) && codeNode;\n\t\tconst argStart = ((prevNode && prevNode.type === \",\") || lineStart) && type === \"brackets\";\n\t\tconst opStart = prevNode && [\"operation\", \":\"].includes(prevNode.type) && !blockStart;\n\t\tconst chainable = [\"literal\", \"number\", \"string\"].includes(node.type) || (!declaration && leftSide);\n\n\t\t// forceDeclaration ...rest exception\n\t\tif (blockStart || argStart) {\n\t\t\tleftSideLit = false;\n\t\t}\n\n\t\tif (lineStart) {\n\t\t\tif (line) {\n\t\t\t\tresult += line;\n\t\t\t}\n\t\t\tline = \"\";\n\t\t\tdeclaration = node.type === \"keyword\" && [\"const\", \"let\", \"var\"].includes(node.data.val);\n\t\t\t// leftSide = true;\n\t\t}\n\n\n\t\tif (opStart && leftSideLit) {\n\t\t\tleftSide = false;\n\t\t}\n\n\t\tif ((declaration && blockStart) || argStart) {\n\t\t\tleftSide = true;\n\t\t}\n\n\t\tif (leftSide && chainable) {\n\t\t\tleftSideLit = true;\n\t\t}\n\n\n\t\tif (!chain && type !== \"destructuring\" && chainable && !leftSide && (opStart || blockStart)) {\n\t\t\tbeforeChain = prevNode;\n\t\t\tchain = [];\n\t\t}\n\n\t\tlet skipOutput = false;\n\t\tif (chain) {\n\t\t\tconst op = isOPNoAccessor(node);\n\t\t\tskipOutput = true;\n\t\t\tif (!isOP(node)) {\n\t\t\t\tchain.push(node);\n\t\t\t}\n\n\n\t\t\tif (node.brk || op || isLast) {\n\t\t\t\tskipOutput = node.brk || isLast;\n\t\t\t\tconst space = beforeChain && isLit(beforeChain) ? \" \" : \"\";\n\t\t\t\tline += space + formatChain(chain, beforeChain, node);\n\t\t\t\tchain = null;\n\t\t\t}\n\t\t}\n\t\telse if (node.type === \"brackets\") {\n\t\t\tconst destructuring = leftSide && (declaration || (lineStart && parent.type === \"brackets\" && parent.data.open === \"(\")) && [\"{\", \"[\"].includes(node.data.open);\n\t\t\tconst t = destructuring ? \"destructuring\" : (!node.fnArgs ? \"code\" : \"brackets\");\n\t\t\tline += format(node, t, null, isSet);\n\t\t}\n\n\t\tif (node.data.val && !skipOutput) {\n\t\t\tconst needSpace = prevNode && isLit(prevNode) && isLit(node);\n\t\t\tline += (needSpace ? \" \" : \"\") + node.data.val;\n\t\t}\n\n\t\tif (node.brk) {\n\t\t\tline += \";\\n\";\n\t\t}\n\t\tprevNode = node;\n\t});\n\tif (line) {\n\t\tresult += type === \"root\" && !declaration ? \"return \" + line : line;\n\t}\n\tif (parent.type === \"brackets\" && !skipBrackets) {\n\t\tresult += parent.data.close;\n\t}\n\treturn result;\n}\n","import ParseCtrl from \"./parse-ctrl.js\";\n\nconst startExp = \"{{\";\nconst endExp = \"}}\";\n\nexport default function parse (text) {\n\tconst ctrl = new ParseCtrl(text);\n\tconst parse = {\n\t\tstartTag () {\n\t\t\tif (ctrl.match(\"<\")) {\n\t\t\t\tconst match = ctrl.match(/^<([a-z](-?[a-z])*)/i);\n\t\t\t\tif (match) {\n\t\t\t\t\tconst tagName = match[1];\n\t\t\t\t\tctrl.start(\"tag\", {data: {tagName, open: true}});\n\t\t\t\t\tctrl.go(tagName.length + 1);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst matchClose = ctrl.match(/^<\\/([a-z](-?[a-z])*)>/i);\n\t\t\t\t\tif (matchClose) {\n\t\t\t\t\t\tconst tagName = matchClose[1];\n\t\t\t\t\t\tctrl\n\t\t\t\t\t\t\t.go(matchClose[0].length)\n\t\t\t\t\t\t\t.add(\"tag\", {data: {tagName, close: true}});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstartComment () {\n\t\t\tif (ctrl.match(\"<!--\")) {\n\t\t\t\tctrl.start(\"comment\");\n\t\t\t\tctrl.go(4);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tendComment () {\n\t\t\tif (ctrl.match(\"-->\")) {\n\t\t\t\tctrl.go(3).end();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tendTag () {\n\t\t\tif (ctrl.match(\"/>\")) {\n\t\t\t\tctrl.go(2).end({data: {selfClosing: true}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (ctrl.match(\">\")) {\n\t\t\t\tctrl.go().end();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tstartAttr () {\n\t\t\tconst match = ctrl.match(/^(@[a-z]+)?:?([a-z-]+)?(?:=([\"']))?/i);\n\t\t\tif (match && match[0]) {\n\t\t\t\tconst [full, prefix, attr, quote] = match;\n\t\t\t\tif (quote) {\n\t\t\t\t\tctrl.start(\"attr\", {data: {attr, prefix, quote}});\n\t\t\t\t\tctrl.go(full.length);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tctrl\n\t\t\t\t\t\t.go(full.length)\n\t\t\t\t\t\t.add(\"attr\", {data: {attr, prefix}});\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tattr () {\n\t\t\tconst matchExpr = ctrl.match(startExp);\n\t\t\tif (matchExpr) {\n\t\t\t\tctrl.go(startExp.length);\n\t\t\t\tctrl.startCopy();\n\t\t\t\tlet m;\n\t\t\t\tconst matcher = `${endExp}${ctrl.node.data.quote}`;\n\t\t\t\twhile (!m && !ctrl.isEnd()) {\n\t\t\t\t\tm = ctrl.match(matcher);\n\t\t\t\t\t!m && ctrl.go();\n\t\t\t\t}\n\t\t\t\tif (m) {\n\t\t\t\t\tconst expression = ctrl.endCopy();\n\t\t\t\t\tctrl.go(matcher.length).end({data: {expression}});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// parse string\n\t\t\t\tconst stringRegex = /^((\"(?:[^\"\\\\]|\\\\.)*\")|('(?:[^'\\\\]|\\\\.)*'))/;\n\t\t\t\tconst match = ctrl.go(-1).match(stringRegex);\n\t\t\t\tif (match) {\n\t\t\t\t\tctrl.node.value = match[0];\n\t\t\t\t\tctrl.go(match[0].length).end();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttext () {\n\t\t\tconst lastNode = ctrl.root.children[ctrl.root.children.length - 1];\n\t\t\tif (lastNode && lastNode.type === \"text\") {\n\t\t\t\tlastNode.end = ctrl.idx;\n\t\t\t\tlastNode.data.content += ctrl.get(1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tctrl.go(1).add(\"text\", {data: {content: ctrl.get(1)}});\n\t\t\t}\n\t\t},\n\t\texpression () {\n\t\t\tconst match = ctrl.match(\n\t\t\t\tnew RegExp(`^${startExp}(#|/)?(.*?)${endExp}`)\n\t\t\t);\n\t\t\tif (match) {\n\t\t\t\tconst {\"0\": full, \"1\": control, \"2\": expression} = match;\n\t\t\t\tlet fn;\n\t\t\t\tlet args;\n\t\t\t\tif (control === \"#\") {\n\t\t\t\t\tconst match = expression.match(\n\t\t\t\t\t\t/^([a-z]+(?:-[a-z]*)*)\\s?(.*)/i\n\t\t\t\t\t);\n\t\t\t\t\tfn = match[1];\n\t\t\t\t\targs = match[2];\n\t\t\t\t}\n\t\t\t\tctrl.go(full.length).add(\"expression\", {\n\t\t\t\t\tdata: {expression, control, fn, args},\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t};\n\n\twhile (!ctrl.isEnd()) {\n\t\tswitch (ctrl.node.type) {\n\t\t\tcase \"tag\": {\n\t\t\t\tif (ctrl.node.data.open) {\n\t\t\t\t\t[parse.endTag, parse.startAttr].some(p => p());\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tparse.endTag();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"attr\": {\n\t\t\t\tparse.attr();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"comment\": {\n\t\t\t\tparse.endComment();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\t[\n\t\t\t\t\tparse.startTag,\n\t\t\t\t\tparse.startComment,\n\t\t\t\t\tparse.expression,\n\t\t\t\t\tparse.text,\n\t\t\t\t].some(p => p());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tctrl.next();\n\t}\n\treturn ctrl;\n}\n","import ParseCtrl from \"./parse-ctrl.js\";\n\nconst keywords = [\n\t\"async\",\n\t\"await\",\n\t\"break\",\n\t\"case\",\n\t\"class\",\n\t\"catch\",\n\t\"const\",\n\t\"continue\",\n\t\"debugger\",\n\t\"default\",\n\t\"delete\",\n\t\"do\",\n\t\"else\",\n\t\"enum\",\n\t\"export\",\n\t\"extends\",\n\t\"finally\",\n\t\"for\",\n\t\"function\",\n\t\"goto\",\n\t\"if\",\n\t\"import\",\n\t\"in\",\n\t\"instanceof\",\n\t\"let\",\n\t\"new\",\n\t\"return\",\n\t\"super\",\n\t\"switch\",\n\t\"this\",\n\t\"throw\",\n\t\"try\",\n\t\"typeof\",\n\t\"var\",\n\t\"void\",\n\t\"while\",\n\t\"with\",\n\t\"yield\",\n\t\"implements\",\n\t\"package\",\n\t\"protected\",\n\t\"static\",\n\t\"interface\",\n\t\"private\",\n\t\"public\",\n\t\"null\",\n\t\"true\",\n\t\"false\",\n\t\"undefined\",\n];\n\nconst keywordsRegex = new RegExp(`^(${keywords.join(\"|\")})\\\\b`);\n\nexport default function parse (text) {\n\tconst ctrl = new ParseCtrl(text);\n\tconst parse = {\n\t\tstring () {\n\t\t\tif (ctrl.node.type === \"string\") {\n\t\t\t\tconst node = ctrl.node;\n\t\t\t\tif (ctrl.match(ctrl.node.data.quote)) {\n\t\t\t\t\tconst matchEscapes = ctrl.precedes(/(\\\\+)$/);\n\t\t\t\t\tif (\n\t\t\t\t\t\t!matchEscapes ||\n\t\t\t\t\t\t(matchEscapes && matchEscapes[1].length % 2 === 0)\n\t\t\t\t\t) {\n\t\t\t\t\t\tctrl.go().end();\n\t\t\t\t\t\tnode.data.val = node.text;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst matchQuote = ctrl.match(/^([\"'`])/);\n\t\t\t\tif (matchQuote) {\n\t\t\t\t\tctrl.start(\"string\", {data: {quote: matchQuote[1]}});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomment () {\n\t\t\tconst match = ctrl.match(/^(\\/\\/.*?)(?:$|\\Z)/m) || ctrl.match(/^(\\/\\*[\\s\\S]*?\\*\\/)/);\n\t\t\tif (match) {\n\t\t\t\tconsole.log(\"comment\", match[1]);\n\t\t\t\tctrl.go(match[1].length).add(\"comment\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tkeyword () {\n\t\t\tconst match = ctrl.match(keywordsRegex);\n\t\t\tif (match) {\n\t\t\t\tctrl\n\t\t\t\t\t.go(match[1].length)\n\t\t\t\t\t.add(\"keyword\", {data: {val: match[1]}});\n\t\t\t}\n\t\t},\n\t\tbrackets () {\n\t\t\tif (ctrl.node.type === \"brackets\" && ctrl.match(ctrl.node.data.close)) {\n\t\t\t\tctrl.go().end();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst match = ctrl.match(/^([\\(\\[\\{])/);\n\t\t\tif (match) {\n\t\t\t\tctrl.start(\"brackets\", {data: {open: match[1], close: {\"{\": \"}\", \"(\": \")\", \"[\": \"]\"}[match[1]]}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tdot () {\n\t\t\tconst match = ctrl.match(/^(\\.+)/);\n\t\t\tif (match && match[1].length === 1) {\n\t\t\t\tctrl.go().add(\".\", {data: {val: \".\"}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tcomma () {\n\t\t\tif (ctrl.match(\",\")) {\n\t\t\t\tctrl.go().add(\",\", {data: {val: \",\"}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tcolon () {\n\t\t\tif (ctrl.match(\":\")) {\n\t\t\t\tctrl.go().add(\":\", {data: {val: \":\"}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tsemicolon () {\n\t\t\tif (ctrl.match(\";\")) {\n\t\t\t\tctrl.go().add(\";\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tarrow () {\n\t\t\tif (ctrl.match(\"=>\")) {\n\t\t\t\tctrl.go(2).add(\"=>\", {data: {val: \"=>\"}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tnumber () {\n\t\t\tconst match = ctrl.match(/^(\\d+?\\.?\\d*)/);\n\t\t\tif (match) {\n\t\t\t\tctrl.go(match[1].length).add(\"number\", {data: {val: match[1]}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tliteral () {\n\t\t\t// a  // когда в левой части выражения и без цепочек\n\t\t\tconst match = ctrl.match(/^([a-z][a-z0-9]*)/i);\n\t\t\tif (match) {\n\t\t\t\tctrl\n\t\t\t\t\t.go(match[1].length)\n\t\t\t\t\t.add(\"literal\", {data: {val: match[1]}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\toperation () {\n\t\t\tconst match = ctrl.match(/^([^\\s,;\\])}a-z]+)/i);\n\t\t\tif (match) {\n\t\t\t\tctrl\n\t\t\t\t\t.go(match[1].length)\n\t\t\t\t\t.add(\"operation\", {data: {val: match[1]}});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\tlinebreak () {\n\t\t\tif (ctrl.match(/^\\n/)) {\n\t\t\t\tctrl.go().add(\"linebreak\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t};\n\n\twhile (!ctrl.isEnd()) {\n\t\tswitch (ctrl.node.type) {\n\t\t\tcase \"string\": {\n\t\t\t\tparse.string();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"comment\": {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\t[\n\t\t\t\t\tparse.comment,\n\t\t\t\t\tparse.string,\n\t\t\t\t\tparse.linebreak,\n\t\t\t\t\tparse.semicolon,\n\t\t\t\t\tparse.number,\n\t\t\t\t\tparse.keyword,\n\t\t\t\t\tparse.brackets,\n\t\t\t\t\tparse.colon,\n\t\t\t\t\tparse.comma,\n\t\t\t\t\tparse.dot,\n\t\t\t\t\tparse.arrow,\n\t\t\t\t\tparse.literal,\n\t\t\t\t\tparse.operation,\n\t\t\t\t].some(p => p());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tctrl.next();\n\t}\n\treturn ctrl;\n}\n","import parseExpression from \"./parse-expression\";\nimport parseTpl from \"./parse-tpl\";\nimport formatExpression from \"./format-expression\";\n\nexport default {\n\tparseExpression,\n\tparseTpl,\n\tformatExpression,\n};\n","module.exports = require(\"./index.js\").default;\n"],"sourceRoot":""}